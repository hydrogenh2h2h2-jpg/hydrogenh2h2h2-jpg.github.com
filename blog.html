<!doctype html>
<html lang="ro">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Blogul tău — Simplu și Rapid</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0f1724; /* dark fallback */
      --card:#0b1220;
      --muted:#9aa4b2;
      --accent:#60a5fa;
      --glass: rgba(255,255,255,0.03);
      --radius:14px;
      color-scheme: dark;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial}
    body{background:linear-gradient(180deg,#071021 0%, #081226 60%);color:#e6eef6;line-height:1.5;padding:24px}

    /* Layout */
    .container{max-width:1100px;margin:0 auto}
    header{display:flex;align-items:center;justify-content:space-between;gap:16px}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:48px;height:48px;border-radius:12px;background:linear-gradient(135deg,var(--accent),#7c3aed);display:grid;place-items:center;font-weight:700}
    h1{font-size:20px;margin:0}
    nav a{color:var(--muted);text-decoration:none;margin-left:14px}

    /* Hero */
    .hero{display:flex;flex-wrap:wrap;gap:20px;margin-top:26px;padding:20px;background:var(--glass);border-radius:var(--radius);align-items:center}
    .hero-left{flex:1;min-width:240px}
    .hero-right{width:300px;min-width:260px}
    .lead{color:var(--muted);margin-top:8px}
    .cta{margin-top:14px;padding:10px 14px;border-radius:10px;background:linear-gradient(90deg,#2563eb,#7c3aed);border:none;color:white;cursor:pointer}

    /* Grid of posts */
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:18px;margin-top:20px}
    .card{background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);padding:14px;border-radius:12px;border:1px solid rgba(255,255,255,0.03)}
    .card h3{margin:0 0 8px 0}
    .meta{font-size:13px;color:var(--muted);margin-bottom:8px}
    .excerpt{color:var(--muted);font-size:15px}

    /* Composer */
    .composer{margin-top:20px;padding:14px;border-radius:12px;background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);border:1px solid rgba(255,255,255,0.03)}
    label{display:block;margin-bottom:6px;font-weight:600}
    input[type=text],textarea{width:100%;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.05);background:transparent;color:inherit}
    textarea{min-height:100px}
    .row{display:flex;gap:10px}
    .btn{padding:10px 12px;border-radius:10px;border:none;cursor:pointer}
    .btn-primary{background:var(--accent);color:#032;}
    .btn-ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted)}

    footer{margin-top:30px;color:var(--muted);text-align:center}

    /* Responsive */
    @media (max-width:700px){
      .hero-right{width:100%}
      header{flex-direction:column;align-items:flex-start}
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="brand">
        <div class="logo">B</div>
        <div>
          <h1>Blogul lui Rege</h1>
          <div class="muted" style="color:var(--muted);font-size:13px">Scrie. Publică. Repetă.</div>
        </div>
      </div>
      <nav>
        <a href="#">Acasă</a>
        <a href="#composer">Scrie</a>
        <a href="#about">Despre</a>
      </nav>
    </header>

    <section class="hero" aria-label="hero">
      <div class="hero-left">
        <h2>Un blog simplu, ușor de folosit — direct în HTML</h2>
        <p class="lead">Template single-file care salvează postările în browser (localStorage). Poți modifica, adăuga sau exporta postările.</p>
        <div style="margin-top:10px">
          <button class="cta" id="newPostBtn">Adaugă o postare</button>
        </div>
      </div>
      <div class="hero-right">
        <div style="padding:12px;border-radius:10px;background:linear-gradient(180deg,rgba(255,255,255,0.015),transparent);border:1px solid rgba(255,255,255,0.02)">
          <strong>Ultimele postări</strong>
          <div id="miniList" style="margin-top:10px"></div>
        </div>
      </div>
    </section>

    <main>
      <section class="grid" id="postsGrid" aria-live="polite"></section>

      <section class="composer" id="composer">
        <h3>Scrie o postare nouă</h3>
        <form id="postForm">
          <label for="title">Titlu</label>
          <input type="text" id="title" placeholder="Titlul postării">
          <label for="excerpt">Rezumat (max 160 caractere)</label>
          <input type="text" id="excerpt" maxlength="160" placeholder="Un rezumat scurt">
          <label for="content">Conținut</label>
          <textarea id="content" placeholder="Scrie aici... Markdown simplu acceptat"></textarea>
          <div class="row" style="margin-top:10px">
            <button type="submit" class="btn btn-primary">Publică</button>
            <button type="button" id="clearBtn" class="btn btn-ghost">Șterge câmpuri</button>
            <button type="button" id="exportBtn" class="btn btn-ghost">Export JSON</button>
          </div>
        </form>
      </section>

      <section id="about" style="margin-top:18px;color:var(--muted)">
        <h3>Despre</h3>
        <p>Aceasta este o pagină demo: nu are backend. Postările sunt salvate doar în browserul tău (localStorage). Pentru publicare reală, încarcă acest fișier pe un server sau convertește-l într-o aplicație statică/React.</p>
      </section>
    </main>

    <footer>
      &copy; <span id="year"></span> Blogul tău • Template single-file
    </footer>
  </div>

  <script>
    // --- Utilități de stocare ---
    const STORAGE_KEY = 'simple-blog-posts-v1';
    function loadPosts(){
      try{const raw = localStorage.getItem(STORAGE_KEY); return raw ? JSON.parse(raw) : []}catch(e){return []}
    }
    function savePosts(arr){ localStorage.setItem(STORAGE_KEY, JSON.stringify(arr)) }

    // --- Renderizare postări ---
    const postsGrid = document.getElementById('postsGrid');
    const miniList = document.getElementById('miniList');
    const yearSpan = document.getElementById('year');
    yearSpan.textContent = new Date().getFullYear();

    function renderPosts(){
      const posts = loadPosts().slice().reverse(); // cele mai noi prime
      postsGrid.innerHTML = '';
      miniList.innerHTML = '';
      if(posts.length === 0){
        postsGrid.innerHTML = '<div class="card">Nu există postări încă — scrie prima!</div>';
        return;
      }
      posts.forEach((p,i)=>{
        const card = document.createElement('article');
        card.className = 'card';
        card.innerHTML = `
          <div class="meta">${new Date(p.date).toLocaleString()}</div>
          <h3>${escapeHtml(p.title)}</h3>
          <div class="excerpt">${escapeHtml(p.excerpt || p.content.slice(0,120) + (p.content.length>120? '...':''))}</div>
          <details style="margin-top:10px"><summary style="cursor:pointer;color:var(--accent)">Citește</summary><div style="margin-top:10px;white-space:pre-wrap">${escapeHtml(p.content)}</div></details>
          <div style="margin-top:10px;display:flex;gap:8px">
            <button data-id="${p.id}" class="btn btn-ghost" onclick="editPost('${p.id}')">Editează</button>
            <button data-id="${p.id}" class="btn btn-ghost" onclick="deletePost('${p.id}')">Șterge</button>
          </div>
        `;
        postsGrid.appendChild(card);

        const mini = document.createElement('div');
        mini.style.padding = '8px 0';
        mini.style.borderBottom = '1px dashed rgba(255,255,255,0.02)';
        mini.innerHTML = `<strong>${escapeHtml(p.title)}</strong><div style="font-size:12px;color:var(--muted)">${new Date(p.date).toLocaleDateString()}</div>`;
        miniList.appendChild(mini);
      })
    }

    // --- Formular ---
    const form = document.getElementById('postForm');
    const titleInput = document.getElementById('title');
    const excerptInput = document.getElementById('excerpt');
    const contentInput = document.getElementById('content');

    form.addEventListener('submit', e=>{
      e.preventDefault();
      const title = titleInput.value.trim();
      const content = contentInput.value.trim();
      if(!title || !content){ alert('Titlu și conținut sunt obligatorii.'); return }
      const posts = loadPosts();
      // dacă există id în form (edit), actualizează
      const editingId = form.getAttribute('data-edit-id');
      if(editingId){
        const idx = posts.findIndex(p=>p.id===editingId);
        if(idx>-1){posts[idx].title=title;posts[idx].excerpt=excerptInput.value.trim();posts[idx].content=content;posts[idx].date=new Date().toISOString();savePosts(posts); form.removeAttribute('data-edit-id'); alert('Actualizat!') }
      } else {
        const newPost = { id: 'p_'+Date.now(), title, excerpt:excerptInput.value.trim(), content, date:new Date().toISOString() };
        posts.push(newPost); savePosts(posts); alert('Postare publicată!')
      }
      form.reset(); renderPosts();
    })

    document.getElementById('clearBtn').addEventListener('click', ()=>form.reset());
    document.getElementById('newPostBtn').addEventListener('click', ()=>{ window.scrollTo({top:document.getElementById('composer').offsetTop-20,behavior:'smooth'}); titleInput.focus(); })

    document.getElementById('exportBtn').addEventListener('click', ()=>{
      const data = loadPosts();
      const blob = new Blob([JSON.stringify(data,null,2)],{type:'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href = url; a.download = 'blog-posts.json'; a.click(); URL.revokeObjectURL(url);
    })

    // --- Edit & Delete ---
    window.editPost = function(id){
      const posts = loadPosts(); const p = posts.find(x=>x.id===id); if(!p) return alert('Postare negăsită');
      titleInput.value = p.title; excerptInput.value = p.excerpt; contentInput.value = p.content;
      form.setAttribute('data-edit-id', id);
      window.scrollTo({top:form.offsetTop-20,behavior:'smooth'});
    }
    window.deletePost = function(id){
      if(!confirm('Ștergi definitiv această postare?')) return;
      let posts = loadPosts(); posts = posts.filter(p=>p.id!==id); savePosts(posts); renderPosts();
    }

    // --- Safe HTML escape for simple display ---
    function escapeHtml(str){ if(!str && str !== '') return ''; return String(str).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/\"/g,'&quot;').replace(/\'/g,'&#39;'); }

    // --- Seed cu postări demo (doar dacă nu există nimic) ---
    (function seed(){
      const posts = loadPosts();
      if(posts.length===0){
        const example = [
          {id:'p_demo1',title:'Bun venit pe blog',excerpt:'Primul articol — scurt și prietenos.',content:'Salut! Acesta este primul tău articol. Editează-l sau șterge-l.',date:new Date().toISOString()},
          {id:'p_demo2',title:'Cum funcționează',excerpt:'Unde se salvează postările?',content:'Postările sunt salvate în browser (localStorage). Poți exporta sau copia JSON-ul.',date:new Date(Date.now()-86400000).toISOString()}
        ];
        savePosts(example);
      }
      renderPosts();
    })();

    // --- Drag & drop / future improvements ---
    // Comentariu: pentru publicare reală conectează un backend (Firebase, Netlify Functions, API propriul) sau transformă în site static prin export.
  </script>
</body>
</html>